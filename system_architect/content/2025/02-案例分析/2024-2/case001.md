---
id: 'case001'
title: '软件架构质量属性场景分析'
difficulty: 'hard'
chapter: '2024-2'
estimatedTime: 45
points: 25
year: '2024-2'
source: '2024年11月系统架构设计师真题'
tags:
  keywords: ["质量属性","软件架构","场景分析","ATAM"]
  domains: ["软件架构","系统设计"]
  difficulty: 'hard'
---

## 试题一：质量属性

阅读以下关于面向质量属性的软件架构设计的叙述，回答问题1和问题2。 【说明】 某公司拟开发一个基于大语言模型的智能系统，该系统将通过多个大语言模型来协作处理用户提交的任务请求，任务求解过程的状态数据将被记录在任务板中，各个大语言模型根据任务板上任务的实时求解状态，来确定它们当前是否需要被调用以进一步处理该任务，并在处理完成之后将任务的最新状态更新到任务板上。 基于该系统的开发任务，公司召开项目讨论会。会上，项目组介绍了系统需求，主要包括： （a）系统可支持用户在任务板上查看任务的状态和结果，并允许用户多次调用大型语言模型以进一步优化处理结果。 （b）系统可支持任务数据的导入导出，数据导入导出在1分钟内完成 （c）在数据服务器发生故障时，系统应能够立刻切换到备份服务器，并保证数据同步，以确保系统的不间断的服务。 （d）在系统正常负荷情况下，用户在任务板上查询任务状态和结果的响应时间应在2秒内。 （e）系统应确保用户数据和操作记录的安全，防止未经授权的访问。 （f）系统需要支持多语言接口，并提供查询词自动补全和搜索关联功能。 （g）系统应支持扩容，以容纳更多的用户和任务。扩容需求的实现应在两名运维人员工作的情况下在5天内完成。 （h）系统部署在云服务器上。当云服务器出现故障时，系统应在1分钟内检测出故障，并在1小时之内恢复。 （i）系统支持根据用户任务类型调用相应的大语言模型对任务进行处理。 （j）用户可以在任务板上搜索历史任务和结果，搜索结果应在3秒内返回。

**【问题1】**（14分） 为了辅助架构师张工完成系统架构设计，首先需要对上述需求进行分析。请分析需求（a）~（j），补充完善下表中（1）~（7）的空白处。

![image.png](https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/8oLl952owjMJ4lap/img/bff5b820-a047-4ad3-86ce-cf52f1ac95c8.png)

**【问题2】**（11分） 针对需求可用性需求（h），张工提出可采用ping/echo策略完成故障检测，但李工认为从系统资源利用率的角度出发，采用心跳策略完成故障检测更优。 （1）请分别说明如何采用ping/echo策略和心跳策略来完成可用性的故障检测； （2）请解释李工认为心跳策略更优的原因。

###
<!-- ANSWER_START -->
## 参考答案

**【问题1】**

（1）性能

（2）性能

（3）安全性

（4）功能性

（5）可修改性

（6）功能性

（7）性能

**【问题2】**

（1）ping/echo策略通过定期发送ping请求并等待响应来检测故障，而心跳策略则是通过定期交换心跳消息来确认服务状态。

（2）李工之所以认为心跳策略相较于ping/echo策略更为优越，是因为心跳策略能够显著减少资源的消耗，它通过被监控组件主动发送简短的心跳消息来表明运行状态，无需监控组件频繁发送请求并等待回应。此外，心跳策略还能有效降低网络的负载，因为心跳消息通常较短且发送频率较低，对网络带宽的占用也相应减少。最后，心跳策略能够更快速地检测到故障或失联的节点，一旦节点出现故障或无法发送心跳消息，监控组件便能立即察觉并采取措施，从而提高了故障检测的效率。

**解析：**

【问题2】

（1）ping/echo故障检测：ping/echo通过发送ping请求报文给目标主机，并等待其回应来检测网络连通性。如果收到回应，则表明网络通路正常；如果未收到回应或超时，则可能表示网络存在问题或目标主机不可达。

心跳故障检测：心跳机制通过节点间定期发送心跳信号来检测各节点的状态。如果连续一段时间内未收到某个节点的心跳信号，则判定该节点出现故障或失联，并触发相应的故障恢复或切换操作。这种方式常用于分布式系统中，以确保系统的高可靠性和稳定性。

（2）资源消耗较少：心跳模式通常是由被监控组件主动、周期性地向监控组件发送简短的消息，以表明其正在正常运行。这种方式相比ping echo更为高效，因为ping echo需要监控组件定时向被监控组件发送请求，并等待回应，这增加了网络流量和处理器资源的消耗。另外心跳模式使用的是长连接，而ping使用的是短连接。

降低网络负载：由于心跳消息通常较短且发送频率相对较低（根据系统需求设定），因此它们对网络带宽的占用较少。相比之下，ping echo可能需要更频繁地发送和接收消息，从而增加了网络的负载。

故障检测效率更快：心跳模式能够更快速地检测到故障或失联的节点。因为心跳消息是周期性发送的，所以一旦某个节点出现故障或无法发送心跳消息，监控组件就能立即察觉并采取相应的措施。而ping/echo虽然也能用于故障检测，但其响应时间和检测效率可能受到网络延迟和消息丢失等因素的影响。

## 详细解析

**

【问题2】

（1）ping/echo故障检测：ping/echo通过发送ping请求报文给目标主机，并等待其回应来检测网络连通性。如果收到回应，则表明网络通路正常；如果未收到回应或超时，则可能表示网络存在问题或目标主机不可达。

心跳故障检测：心跳机制通过节点间定期发送心跳信号来检测各节点的状态。如果连续一段时间内未收到某个节点的心跳信号，则判定该节点出现故障或失联，并触发相应的故障恢复或切换操作。这种方式常用于分布式系统中，以确保系统的高可靠性和稳定性。

（2）资源消耗较少：心跳模式通常是由被监控组件主动、周期性地向监控组件发送简短的消息，以表明其正在正常运行。这种方式相比ping echo更为高效，因为ping echo需要监控组件定时向被监控组件发送请求，并等待回应，这增加了网络流量和处理器资源的消耗。另外心跳模式使用的是长连接，而ping使用的是短连接。

降低网络负载：由于心跳消息通常较短且发送频率相对较低（根据系统需求设定），因此它们对网络带宽的占用较少。相比之下，ping echo可能需要更频繁地发送和接收消息，从而增加了网络的负载。

故障检测效率更快：心跳模式能够更快速地检测到故障或失联的节点。因为心跳消息是周期性发送的，所以一旦某个节点出现故障或无法发送心跳消息，监控组件就能立即察觉并采取相应的措施。而ping/echo虽然也能用于故障检测，但其响应时间和检测效率可能受到网络延迟和消息丢失等因素的影响。

## 关键要点

- 理解题目中的核心技术概念
- 掌握相关架构设计原理
- 能够分析实际应用场景

## 评分标准

- 技术理解准确性（40%）
- 分析逻辑清晰性（30%）
- 实践应用合理性（30%）

<!-- ANSWER_END -->
