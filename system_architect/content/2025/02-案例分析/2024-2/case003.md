---
id: 'case003'
title: 'ROS机器人操作系统分析'
difficulty: 'hard'
chapter: '2024-2'
estimatedTime: 45
points: 25
year: '2024-2'
source: '2024年11月系统架构设计师真题'
tags:
  keywords: ["ROS","机器人系统","嵌入式系统"]
  domains: ["嵌入式系统","机器人技术"]
  difficulty: 'hard'
---

## 试题三：嵌入式

机器人操作系统ROS  
【问题1】（12分）

(1) ROS定义和特点。

(2) ROS2与ROS1相比哪些地方做了改进？

【问题2】（8分）

四种通信服务选词填空。

![image.png](https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/8oLl952owjMJ4lap/img/6505d58a-1543-45bb-acdd-c77de04ba672.png)

【问题3】（5分）

根据下图，请解释ROS2架构每一层含义。

![image.png](https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/8oLl952owjMJ4lap/img/a22bf565-1934-41c3-b916-43b86667c00e.png)  
  

###
<!-- ANSWER_START -->
## 参考答案

**【问题1】**

**定义：**ROS（Robot Operating System），即机器人操作系统，是专为机器人软件开发所设计出来的一套电脑操作系统架构。它是一个开源的元级操作系统（或称为后操作系统），提供类似于操作系统的服务，包括硬件抽象描述、底层驱动程序管理、共用功能的执行、程序间消息传递、程序发行包管理等。ROS还提供了一些工具和库，用于获取、建立、编写和执行多机融合的程序。

**特点：**

（1）点对点的设计：ROS采用了点对点的软件架构，使得各个功能模块（节点）可以分布在不同的主机上，并通过发布/订阅机制进行通信。这种设计提高了系统的灵活性和可扩展性。

（2）多语言支持：ROS支持多种编程语言，如Python、C++、Java、Octave和LISP等，这使得开发者可以根据自己的需求和擅长选择合适的语言进行开发。

（3）架构精简、集成度高：ROS框架具有模块化特点，每个功能节点可以进行单独编译，并使用统一的消息接口，使得模块的移植和复用更加便捷。同时，ROS开源社区中移植、集成了大量的已有开源项目中的代码，如OpenCV、PCL等。

（4）提供丰富的工具和库：ROS提供了大量的工具和库，如roscpp、rospy等，用于实现自主移动、操作物体、感知环境等功能。这些工具和库极大地简化了机器人软件的开发过程。

（5）强大的生态系统和社区支持：ROS的支持与发展构成了一个强大的生态系统。官方网站（www.ros.org）提供了各种支持文档和开源程序包，使得用户可以搜索并学习全球开发者共享的资源和经验。此外，ROS社区也非常活跃，开发者可以在社区中交流心得、分享经验并获取帮助。

**主要改进点：**

*   通信机制：ROS1使用基于TCP/IP的自定义协议（TCPROS/UDPROS），而ROS2则采用了DDS（Data Distribution Service）作为通信中间件。DDS支持去中心化的发布/订阅模型，提高了系统的可靠性和稳定性。
    
*   支持平台：ROS1主要支持Linux系统，而ROS2则扩展到了Windows、macOS以及RTOS等多个操作系统，提供了更广阔的开发空间。
    
*   实时性：ROS2在实时性方面进行了优化，包括引入更高效的通信机制和减少系统开销等，使得ROS2在实时性方面有了显著提升。
    
*   安全性：ROS2加强了安全性方面的考虑，引入了加密机制等安全措施，提高了机器人在网络通信中的安全性。
    
*   数据类型和序列化：ROS2使用了DDS的数据类型系统（IDL定义），支持更复杂的数据结构和数据类型，包括嵌套结构、枚举类型和位字段等。
    
*   节点组织：在ROS2中，节点可以是独立的进程，也可以是共享同一进程的多个节点。这种设计减少了进程间通信的开销，提高了效率。
    

**【问题2】**

1.话题通信：是一种**单向通信**模型，在通信双方中，发布方发布数据，订阅方订阅数据，数据流单向的由发布方传输到订阅方。

2.服务通信：是一种**基于请求响应**的通信模型，在通信双方中，客户端发送请求数据到服务端，服务端响应结果给客户端。

3.动作通信：是一种带有**连续反馈**的通信模型，在通信双方中，客户端发送请求数据到服务端，服务端响应结果给客户端，但是在服务端接收到请求到产生最终响应的过程中，会发送中间连续的反馈（进度）信息到客户端。

4.参数服务：是一种**基于共享**的通信模型，在通信双方中，服务端可以设置数据，而客户端可以连接服务端并操作服务端数据。

**【问题3】**

1. 操作系统层（OS Layer）：提供基础运行环境，支持 ROS 2 在 Linux、Windows、macOS 等操作系统上运行，负责硬件驱动、进程管理和网络通信。

2. DDS实现层（DDS Implementation Layer）：ROS 2 的底层通信引擎，基于 DDS（数据分发服务） 协议实现节点间的数据传输。默认使用 eProsima Fast DDS 或 Cyclone DDS，支持去中心化通信、QoS 配置和多协议传输（如 UDP/TCP）。

3. 抽象DDS层（RMW Layer）：ROS Middleware Interface（RMW） 是 DDS 的抽象接口层，屏蔽不同 DDS 实现的差异。上层通过统一的 rmw\_publish、rmw\_subscribe 等接口调用 DDS 功能，支持切换不同的 DDS 中间件（如 Fast DDS、Cyclone DDS）。

4. ROS客户端库层（RCL Layer）：提供开发者直接使用的 API，如 rclcpp（C++）、rclpy（Python），封装话题、服务、动作、参数等通信功能。通过调用 RMW 层接口，实现与底层 DDS 的解耦。

5. 应用层（Application Layer）：开发者编写机器人功能代码的层级，通过 ROS 2 节点（Node）实现具体功能（如传感器控制、路径规划）。节点通过 RCL 调用通信接口，无需直接处理底层通信细节。

ROS 2 架构通过分层设计，将通信功能从应用逻辑中解耦，底层依赖 DDS 实现高效通信，中间层（RMW/RCL）抽象接口，上层开发者专注业务逻辑。这种设计兼顾灵活性（支持多 DDS 实现）和易用性（屏蔽底层复杂性）。

## 关键要点

- 理解题目中的核心技术概念
- 掌握相关架构设计原理
- 能够分析实际应用场景

## 评分标准

- 技术理解准确性（40%）
- 分析逻辑清晰性（30%）
- 实践应用合理性（30%）

<!-- ANSWER_END -->
