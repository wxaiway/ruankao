# 软件架构设计 - 软考复习完整资料

> **重要提示：** 软件架构设计是软考的核心部分，虽然某些年度可能有偏离，但长期来看必然回归。本资料基于权威语音课程和教材整理，适用于系统架构师/软件设计师考试。

---

## 目录

1. [软件架构基础概念](#1-软件架构基础概念)
2. [架构描述语言ADL](#2-架构描述语言adl)
3. [4+1视图模型](#3-41视图模型)
4. [基于架构的软件开发方法ABSD](#4-基于架构的软件开发方法absd)
5. [软件架构风格详解](#5-软件架构风格详解)
6. [特定领域软件架构DSSA](#6-特定领域软件架构dssa)
7. [软件架构评估](#7-软件架构评估)
8. [模型驱动架构MDA](#8-模型驱动架构mda)
9. [软件架构复用](#9-软件架构复用)
10. [考试重点与答题技巧](#10-考试重点与答题技巧)

---

## 1. 软件架构基础概念

### 1.1 架构的本质与定义

**核心定义（考试必考）：**
- 软件架构是一种**高层设计**，介于需求分析和软件设计之间
- 填补了业务层面到技术层面的鸿沟
- 为软件系统提供了**结构、行为和属性的高级抽象**
- **由词汇表（Vocabulary）和约束（Constraints）组成**

**重要理解点：**
- 架构设计本质上是**需求分配**过程
- 将复杂需求分解并分配给不同构件，化整为零
- 类似建房子时先考虑整体结构（框架式vs砖砌式）

### 1.2 架构的主要作用

1. **项目干系人的交流手段**
   - 技术人员与非技术人员的沟通媒介
   - 使用专业术语（如B/S架构、SOA）降低沟通成本

2. **可传递和可复用的模型**
   - 通过研究软件架构可以预测软件质量
   - 支持推理、控制和循序渐进改善

3. **设计变更容易阶段的决策支持**
   - 高层设计变更相对容易
   - 便于考虑系统结构的可选方案

4. **展现软件的结构属性和内部交互关系**

**注意：** 架构不仅仅表达功能性需求，更重要的是要满足**非功能性需求**（性能、安全、可靠性等）

### 1.3 软件架构 vs 软件体系结构

- **软件架构**：企业界常用术语
- **软件体系结构**：学术界常用术语
- **两者含义相同**，考试中会混用

---

## 2. 架构描述语言ADL

### 2.1 ADL基本概念

**定义：** 架构描述语言是一种**形式化语言**，用于明确说明软件系统的概念架构和建模。

**特点：**
- 理论性强，实际应用很少（几乎没人用）
- 类似"伪代码"的概念

### 2.2 ADL三大基本元素（必考）

1. **构件（Component）**
   - 功能性部件，完成计算或数据存储

2. **连接件（Connector）**
   - 连接构件，实现构件间交互
   - 不一定直接相连，可以是独立构件方式

3. **架构配置（Configuration）**
   - 构件与连接件的连接图
   - 决定哪些要衔接，实现可配置化

**考试技巧：** 题目中如果提到"组件、组件接口、___和架构配置"，答案就是"连接件"。

---

## 3. 4+1视图模型

### 3.1 视图模型目的

- 从不同视角观察系统，简化复杂性
- 满足不同干系人需求
- 类似"盲人摸象"，每个视图看到一个维度

### 3.2 五个视图详解

| 视图名称 | 核心关注点（关键词） | 主要建模方式 | 面向人员 |
|---------|-------------------|-------------|----------|
| **逻辑视图** | **功能** | 类图、对象图 | 最终用户、分析师 |
| **开发视图**（实现视图） | **配置、装配、源代码组织** | 包图、构件图 | 程序员、配置管理员 |
| **进程视图**（过程视图） | **并发、性能、可伸缩性、吞吐量** | 活动图、时序图 | 集成人员、性能工程师 |
| **物理视图** | **部署、安装、拓扑结构** | 部署图 | 系统工程师 |
| **场景视图**（用例视图） | **综合，将各视图关联** | 用例图 | 所有干系人 |

**记忆口诀：** 逻辑功能、开发配装、进程并发、物理部署、场景综合

**考试注意点：**
- "对象与对象之间的关系" → 逻辑视图
- "系统的配置、装配问题" → 开发视图  
- "可伸缩性、吞吐率问题" → 进程视图

---

## 4. 基于架构的软件开发方法ABSD

### 4.1 ABSD核心特征

- **架构驱动**：整个过程围绕架构展开
- **由业务、质量和功能需求组合驱动架构设计**
- 支持软件重用（构件库、需求库）
- **自顶向下递归细化**方式

### 4.2 ABSD三大基础

1. **功能分解** - 为基于构件开发做准备
2. **选定架构风格** - 实现质量和业务需求
3. **软件模板使用** - 加速开发

### 4.3 ABSD开发过程（考试重点）

**主流程：**
```
架构需求 → 架构设计 → 架构文档化 → 架构复审 → 架构实现 → 架构演化
```

**迭代特征：**
- 架构复审可多次返回架构设计（0到N次）
- 架构演化可返回前面阶段（0到M次）
- **递归**精化，不断优化

### 4.4 各阶段详解

#### 4.4.1 架构需求阶段
- **需求库**：复用以往需求分析成果
- **标识构件**：类图 → 分组 → 打包成构件
- 评审需求

#### 4.4.2 架构设计阶段  
- 提出架构模型
- **映射构件**（注意与标识构件区别）
- 分析构件相互作用
- 产生架构

#### 4.4.3 架构文档化阶段
**产出物：**
- 架构规格说明书
- **测试架构需求的质量设计说明书**

**文档质量要求：**
- 从使用者角度编写
- 发给所有相关开发人员  
- 确保开发者手上是最新版本

#### 4.4.4 架构复审阶段
- 也叫**架构评估**
- 在高层设计阶段评估，类似建房子的结构力学测算
- 及早发现问题，降低风险

#### 4.4.5 架构实现阶段
- 依托**构件库**
- 分析设计 → 构件实现 → 组装 → 系统测试

#### 4.4.6 架构演化阶段
- 系统运行后的持续优化调整
- 需求变化分类 → 演化计划 → 构件变动 → 重新组装

### 4.5 ABSD关键概念（考试要点）

**用什么描述架构？** 视图和视角（4+1视图）

**用什么描述功能需求？** 用例

**用什么描述质量需求？** 场景

---

## 5. 软件架构风格详解

### 5.1 架构风格概述

**定义：** 特定领域中系统组织方式的惯用模式，具有某种共性

**五大传统分类：**
1. 数据流风格
2. 调用/返回风格  
3. 独立构件风格
4. 虚拟机风格
5. 以数据为中心的风格

**重要提示：** 不同架构风格可以组合使用，不是相互排斥的。

### 5.2 数据流风格

#### 5.2.1 核心思想
- 以数据处理为核心
- 数据在处理组件间流动传递
- 一步一步完成系统处理职能
- **数据驱动**的架构风格

#### 5.2.2 适用场景
- 数据处理、转换场景
- 处理过程可分解为多个独立步骤
- **传统编译器**：词法分析→语法分析→语义分析→代码生成
- **网络报文处理**：七层模型的逐层封装/解封

#### 5.2.3 优缺点
**优点：**
- 松耦合、高内聚
- 可重用性和可维护性好
- 可扩展性强
- 支持并行处理

**缺点：**
- **交互性差**（最重要的缺点）
- 复杂性和性能开销

#### 5.2.4 子风格对比

| 特征 | 批处理 | 管道-过滤器 |
|------|--------|-------------|
| **数据处理方式** | **整体处理**（必须处理完全部数据） | **流式处理**（边处理边传递） |
| **用户交互** | **几乎无交互** | **弱交互** |
| **适用场景** | 大量离线数据处理（如视频转码） | 实时/准实时处理（如Unix管道） |

**判断技巧：** 
- 题目强调"作为整体"→批处理
- 题目强调"流式"或"持续"→管道-过滤器

### 5.3 调用/返回风格

#### 5.3.1 核心思想
- 通过函数/方法调用组织系统
- 最常见、最基础的架构风格
- 几乎所有系统都使用

#### 5.3.2 重点：分层架构

**核心思想：** 系统分为层次结构，每层为上层提供服务，使用下层服务

**典型三层架构：**
- **表示层**：用户界面和交互
- **业务逻辑层**：核心业务规则和流程  
- **数据访问层**：数据持久化和访问

**优点：**
- 关注点分离，职责清晰
- 利于复用和扩展
- 修改某层只影响相邻层

**缺点：**
- 不是所有系统都适合分层
- 可能存在跨层调用，破坏架构
- 性能开销

### 5.4 独立构件风格

#### 5.4.1 核心思想
- 构件相互独立，**间接通信**
- 区别于调用/返回的直接调用
- 通过事件机制或消息传递通信

#### 5.4.2 事件驱动系统（重点）

**架构模式：**
```
事件源 → 事件管理器/总线 → 事件处理器
```

**优点：**
- 极低耦合度
- 极高可修改性和可扩展性
- 支持发布-订阅模式

**缺点：**
- 放弃了对系统计算的控制
- 数据交换效率较低
- 推理和调试困难

**典型应用：**
- GUI事件处理
- 消息队列（MQ）
- 发布-订阅系统

### 5.5 虚拟机风格

#### 5.5.1 核心思想
- 构建"虚拟机"来解释执行非原生语言
- 极大提高系统**灵活性**和**可配置性**
- 支持**自定义规则/业务流程**

#### 5.5.2 经典实例
- **Java虚拟机**：一次编译，到处运行
- **工作流引擎**：可视化定义业务流程
- **低代码平台**：拖拽配置生成应用

#### 5.5.3 子风格对比

| 特征 | 解释器 | 规则为中心系统 |
|------|--------|----------------|
| **基础构成** | 解释器引擎+程序+状态 | 解释器基础上**增加知识库** |
| **适用场景** | 需要自定义规则的场景 | **专家系统**、智能决策 |
| **与专家系统关系** | 可以实现，但不是最优 | **更适合**实现专家系统 |

**考试技巧：** 
- 看到"自定义"→解释器或虚拟机
- 看到"专家系统"→优选规则为中心系统

### 5.6 以数据为中心的风格

#### 5.6.1 核心思想
- 中心数据存储+周围功能组件
- 组件围绕数据进行操作
- 组件间通过修改中心数据影响彼此

#### 5.6.2 数据库系统 vs 黑板系统

| 特征 | 数据库系统 | 黑板系统 |
|------|------------|----------|
| **通信方式** | 被动查询和修改 | **主动触发**相关组件 |
| **控制机制** | 无特殊控制 | 数据变化**触发**其他组件 |
| **适用场景** | 一般数据管理 | **语音识别、模式识别、知识推理** |

**记忆技巧：** 
- 语音识别、模式识别 → 黑板系统
- 一般数据操作 → 数据库系统

### 5.7 其他重要架构风格

#### 5.7.1 闭环控制风格（过程控制）

**核心思想：** 持续采集环境数据，与目标比较，根据偏差调整输出

**结构：** 目标值 → 比较器 → 控制器 → 受控系统 → 传感器 → (反馈)

**经典实例：**
- **空调温控**：检测室温，与设定温度比较，控制制冷
- **定速巡航**：检测车速，与设定速度比较，调整油门

**开环vs闭环：**
- **开环**：一次性执行（如遥控器换台）
- **闭环**：持续循环调节

#### 5.7.2 C2架构风格

**特点：**
- 构件和连接件都有顶部和底部
- 构件只能与连接件相连
- 类似分层风格的变种
- 实际应用很少，了解即可

---

## 6. 特定领域软件架构DSSA

### 6.1 DSSA基本概念

**定义：** 在特定应用领域中为一组应用提供组织结构参考的软件架构

**核心思想：** 
- 聚焦某个领域（如教育、电力、金融）
- 提取**共性**部分形成可复用架构
- 在共性基础上进行**个性化**二次开发

### 6.2 DSSA三大活动

| 活动 | 对应阶段 | 主要任务 | 产出物 |
|------|----------|----------|--------|
| **领域分析** | 需求分析 | 识别共性需求 | 领域模型 |
| **领域设计** | 软件设计 | 设计通用架构 | DSSA |
| **领域实现** | 软件实现 | 开发可复用构件 | 构件库、框架 |

### 6.3 DSSA参与角色

**四类角色：**
1. **领域专家** - 提供建议，不直接动手
2. **领域分析师** - 执行领域分析  
3. **领域设计师** - 执行领域设计
4. **领域实现人员** - 执行领域实现

**特点：** 需要**更有经验的人员**，因为共性部分质量影响所有后续产品

### 6.4 DSSA三层次模型

1. **领域开发环境** - 领域工程师（共性部分）
2. **领域特定应用开发环境** - 应用工程师（个性化二次开发）  
3. **应用执行环境** - 操作员（最终用户使用）

### 6.5 分类

- **垂直型**：相同领域深入（如专门做教育行业软件）
- **水平型**：不同领域平推（如通用构件库）

---

## 7. 软件架构评估

### 7.1 评估目标与重要性

**目标：** 在项目早期发现架构问题，降低风险

**重要性：** 架构是高层设计，问题影响整个系统，早期发现成本低

**评估重点：** 功能性需求 + **非功能性质量属性**（更重要）

### 7.2 关键质量属性详解

#### 7.2.1 性能（Performance）

**定义：** 系统的响应能力

**衡量指标：** 响应时间、吞吐量、并发用户数

**性能战术三大类：**

1. **资源需求**
   - 提高计算效率（算法优化）
   - 减少计算开销
   - 管理事件率（控制采样频率）

2. **资源管理**  
   - 引入并发/并行
   - 维护多副本（如读写分离）

3. **资源仲裁**（考试重点）
   - **优先级调度**
   - 先进先出（FIFO）
   - 队列调度

#### 7.2.2 可用性（Availability）

**定义：** 系统正常运行的时间比例（用"几个9"衡量）

**典型场景：**
- "系统支持7×24小时工作"
- "主服务器故障1分钟内切换到备用服务器"

**可用性战术三大类：**

1. **错误检测**
   - **心跳（Heartbeat）**
   - **Ping/Echo**

2. **错误恢复**
   - **冗余（主备、热备、集群）**
   - 表决（多数决定）

3. **错误预防**
   - 事务机制
   - 移除故障服务

#### 7.2.3 安全性（Security）

**定义：** 向合法用户提供服务，阻止非授权使用和破坏

**四大要素：** 机密性、完整性、可用性、不可否认性

**典型场景识别：**
- "防止99%的黑客攻击" → 安全性
- "对所有操作进行日志记录" → 安全性（审计）
- "数据库**授权**可用性达到99.9%" → 安全性（注意与系统可用性区别）

**安全战术三大类：**

1. **抵抗攻击**
   - 身份验证与授权
   - 加密

2. **检测攻击**
   - **入侵检测**（防黑客攻击的主要手段）

3. **从攻击中恢复**  
   - 冗余
   - 追踪审计

#### 7.2.4 可修改性（Modifiability）

**定义：** 以低成本、高效率修改系统的能力

**衡量标准：** 人月成本（如"4人月内完成"）

**可修改性战术三大类：**

1. **局部化修改**
   - 高内聚、低耦合

2. **防止连锁反应**
   - **信息隐藏**（考试高频考点！）
   - 使用中介/代理

3. **推迟绑定时间**
   - 运行时注册、动态绑定
   - 使用配置文件

#### 7.2.5 其他质量属性

- **易用性**：学习时间、界面友好
- **可测试性**：远程调试接口

### 7.3 质量属性战术选择技巧

**考试策略：**
1. 先根据场景关键词确定质量属性类型
2. 再根据题目具体描述选择对应战术
3. 注意题目中的暗示词汇

**示例：**
- "数据传递时延不大于1秒，并提供**优先级管理**"
  - 质量属性：性能（时延）
  - 战术：资源仲裁（优先级管理是明确暗示）

### 7.4 架构评估中的关键概念

#### 7.4.1 敏感点（Sensitivity Point）
**定义：** 构件属性的微小变化对**单一质量属性**产生显著影响

**示例：** 算法复杂度影响系统整体性能

#### 7.4.2 权衡点（Trade-off Point）  
**定义：** 构件属性变化同时影响**多个质量属性**，且影响方向相反

**示例：** 提高加密级别→安全性提升，性能下降

#### 7.4.3 风险点（Risk Point）
**定义：** 可能导致问题的潜在隐患或不确定性决策

**示例：** "对业务逻辑描述尚未达成共识，**可能**导致..."

#### 7.4.4 非风险点（Non-Risk Point）
**定义：** 确认可行的、不会带来问题的设计决策

**示例：** "假设每秒10个请求，每个30ms，则1秒内完成的要求**可以实现**"

### 7.5 架构评估方法

#### 7.5.1 三种方法对比

| 方法 | 优点 | 缺点 |
|------|------|------|
| **基于调查问卷** | 简单快速 | 主观性强 |
| **基于度量** | 客观精确 | 操作困难 |
| **基于场景** | 折中方案，主流方法 | - |

#### 7.5.2 场景的六大组成部分

1. **刺激源**：产生刺激的实体
2. **刺激**：促使系统响应的事件  
3. **制品**：被刺激的系统部分
4. **环境**：刺激发生时系统状态
5. **响应**：系统的反应
6. **响应度量**：量化响应的标准

#### 7.5.3 SAAM vs ATAM

**SAAM（软件体系结构分析法）：**
- 主要关注**可修改性**
- 输入：问题描述、需求说明、**架构描述**

**ATAM（体系结构权衡分析法）：**  
- 关注**多种质量属性**（性能、可用性、安全性等）
- 四阶段：场景收集→架构视图分析→**属性模型分析**→总结报告

---

## 8. 模型驱动架构MDA

### 8.1 MDA基本概念

**核心思想：** 以形式化数学模型为基础的开发方法

**目标：** 实现可移植性强、互通性强、可重用性强的软件

### 8.2 MDA核心模型

**传统三层模型：**
```
PIM（平台独立模型）→ PSM（平台相关模型）→ 代码
```

**现代四层模型：**
```
CIM（计算无关模型）→ PIM → PSM → 代码
```

**对应关系：**
- **CIM**：领域需求（行业共性）
- **PIM**：UML建模（与开发平台无关）  
- **PSM**：具体平台映射
- **代码**：最终实现

### 8.3 实际应用

- UML建模是PIM的典型应用
- 可视化开发利用了MDA思想
- 低代码平台是现代MDA实践

---

## 9. 软件架构复用

### 9.1 复用的历史发展

**发展历程：**
```
函数库 → 类库 → 框架 → 构件库 → 服务库
```

**颗粒度递增：** 函数 < 类 < 框架 < 构件 < 服务

### 9.2 复用类型

#### 9.2.1 按范围分类
- **水平复用**：跨行业通用（如标准函数库）
- **垂直复用**：特定行业专用（如医学影像处理）

#### 9.2.2 按策略分类  
- **机会复用**：遇到机会就复用，比较随意
- **系统复用**：有规划的复用，开发前就决定复用什么

### 9.3 架构复用

**架构风格本身就是复用架构的机制**

**软件产品线**：
- 核心公式：`软件产品线 = 核心资产库 + 产品集合`
- 通过复用核心资产快速开发系列产品
- 提高效率、缩短上市时间、提升质量

---

## 10. 考试重点与答题技巧

### 10.1 必考知识点总结

#### 10.1.1 概念定义类（选择题常考）
1. **架构定义** = 词汇表 + 约束
2. **ADL三要素** = 构件 + 连接件 + 架构配置  
3. **4+1视图**：逻辑(功能)、开发(配装)、进程(并发)、物理(部署)、场景(综合)
4. **ABSD流程**：需求→设计→文档化→复审→实现→演化

#### 10.1.2 架构风格识别（案例分析必考）

**识别技巧口诀：**
- 数据一步步处理 → 数据流风格
- 函数调用有层次 → 调用/返回风格（分层）
- 事件驱动很独立 → 独立构件风格
- 自定义规则灵活 → 虚拟机风格  
- 数据中心围一圈 → 以数据为中心风格

**具体场景对应：**
- 编译器 → 数据流（批处理）
- 网络报文处理 → 数据流（管道-过滤器）
- 三层架构 → 分层
- GUI事件处理 → 事件驱动
- 工作流引擎 → 解释器
- 专家系统 → 规则为中心
- 语音识别 → 黑板系统
- 温控系统 → 闭环控制

#### 10.1.3 质量属性战术（案例分析高频）

**快速识别表：**

| 关键词 | 质量属性 | 典型战术 |
|-------|----------|----------|
| 响应时间、吞吐量、优先级 | 性能 | 资源仲裁 |
| 7×24小时、主备切换、心跳 | 可用性 | 冗余、心跳 |
| 黑客攻击、授权、审计 | 安全性 | 入侵检测 |
| 人月成本、信息隐藏 | 可修改性 | 信息隐藏 |

### 10.2 答题技巧

#### 10.2.1 选择题技巧
1. **关键词识别法**：抓住题目中的专业术语
2. **排除法**：先排除明显错误选项
3. **对比分析法**：注意选项间的细微差别

#### 10.2.2 案例分析题技巧
1. **场景分析法**：
   - 先理解业务场景
   - 识别关键需求（功能性+非功能性）
   - 选择合适架构风格
   
2. **质量属性分析法**：
   - 识别质量属性类型
   - 找到题目暗示的战术线索
   - 选择最匹配的战术

3. **架构评估分析法**：
   - 区分敏感点、权衡点、风险点、非风险点
   - 注意"可能"(风险点) vs "可以"(非风险点)

#### 10.2.3 论文写作要点
1. **综合应用多种方法**：不要单一使用某种方法
2. **实际项目结合**：结合自己的项目经验
3. **质量属性驱动**：重点关注非功能性需求
4. **评估方法应用**：可以写SAAM或ATAM的应用

### 10.3 常见陷阱与注意事项

#### 10.3.1 概念混淆陷阱
- 软件架构 ≠ 系统架构（考试主要关注软件架构）
- 开发视图的"配置装配" ≠ 系统部署
- 数据库系统 ≠ 黑板系统（后者有触发机制）

#### 10.3.2 架构风格选择陷阱
- 不要被表面现象迷惑，要看核心特征
- 注意题目中的限定词汇（如"主要"、"更适合"）
- 专家系统：规则为中心 > 解释器（虽然都可以）

#### 10.3.3 质量属性识别陷阱
- "数据库授权的可用性" → 安全性（不是可用性）
- "优先级管理" → 资源仲裁（不是并发）
- "信息隐藏" → 可修改性（不是安全性）

### 10.4 考前冲刺要点

#### 10.4.1 必背知识点
1. ADL三要素
2. 4+1视图对应关系
3. ABSD六阶段流程
4. 五大架构风格特征
5. 四大质量属性战术

#### 10.4.2 练习重点
1. 架构风格识别练习
2. 质量属性场景分析
3. DSSA角色和活动对应
4. 架构评估方法区别

#### 10.4.3 时间分配建议
- 选择题：每题1-2分钟
- 案例分析：仔细读题，先理解场景再答题
- 论文：30分钟构思大纲，90分钟写作

---

## 总结

软件架构设计是软考的核心部分，需要：

1. **掌握基础概念**：架构定义、ADL、4+1视图、ABSD
2. **熟练识别架构风格**：五大风格的特征和适用场景
3. **深入理解质量属性**：四大质量属性及其战术
4. **掌握评估方法**：SAAM、ATAM的特点和应用
5. **注重实践应用**：结合实际项目经验

**学习建议：**
- 理论与实践结合
- 多做真题练习
- 关注新技术发展（如微服务、云原生等）
- 培养架构思维，不局限于考试

---

**最后提醒：** 软件架构设计虽然理论性较强，但其思想和方法在实际工作中非常有用。掌握好这些知识，不仅能通过考试，更能提升实际的系统设计能力。
